<br />
<div align="center">
  
  <h1 align="center">CLOTHES 3</h3>

  <p align="left">
    La valoración total del examen es de <b>10 puntos</b>.
    <br />
    <br />
    Lenguajes: Java, SQL y PHP
    ·
    Motor BBDD: PostgreSQL
  </p>
</div>

    
## RESUMEN:   
Ampliar la API REST/JSON del proyecto "Clothes" tanto en <a href="https://github.com/jamonino/clothes1">JAVA</a> como en <a href="https://github.com/jamonino/clothes-PHP">PHP</a>

* Limpieza y estructura de código **1P**

### 3P Ejercicio 1 (PHP): 

Queremos almacenar nuestros marcas de ropa (Por ejemplo Chanel , Prada y Gucci) de manera que podamos obtener un listado de productos con nombre, stock, precio y género de una determinada marca haciendo un GET en la ruta /brand/{id}. 

El parámetro {id} sería un número entero identificador de la marca. Las marcas tienen un nombre y un país de origen.

Actualmente los elementos de la tabla products no están relacionados con ninguna marca por lo que hay que inventar al menos tres marcas y relacionar cada uno de los productos manualmente de forma aleatoria con ellas.

**Archivo DB.sql**

* Archivo DB.sql con las modificaciones correctas **0,5P**

**/brand/{id}**
    
* GET - Lista   **2,5P**

<-- RESPONSE
```js
{
  "responseCode":1,
  "brand":{
    "id":3
    "name":"Adidas",
    "origin":"USA",
    "products":[
      {
        "id":1,
        "name":"corbata",
        "price":2900,
        "stock":8,
        "gender":1,
      },
      {
        "id":2,
        "name":"bufanda",
        "price":1200,
        "stock":4,
        "gender":2,
      }
    ]
  }
}
```

NOTA1: Si alguien no sabe cómo modificar el archivo DB.sql podrá pedirlo al profesor por <a href="mailto:joseantonio.monino@murciaeduca.es">email</a> perdiendo el punto correspondiente.

NOTA2: Modificar el archivo DB.sql no tiene ningún efecto sobre la bbdd. Para aplicar los cambios habrá que ejecutar su contenido en la misma tal y como se detallaba en el ANEXO BBDD.

### 2P Ejercicio 2 (PHP): 

**/brandOrigin/**

* POST Crear un Web service de tipo POST en la ruta brandOrigin/ para listar todas las marcas que hay en la bbdd con el origen especificado. **1P**

--> REQUEST 
```js
{
  "origin":"USA"
}
```
<-- RESPONSE
```js
{
  "responseCode":1
  "brands":[
    {
      "id":2,
      "name":"Nike",
      "origin":"USA"
    },
    {
      "id":3,
      "name":"Adidas",
      "origin":"USA"
    }
  ]
}
```


### 2P Ejercicio 3 (JAVA): 

**user/brand/** 

* GET - Lista **2P**

Obtener un listado de productos de las marcas especificadas en las petición
--> REQUEST 
```js
[
  {
    "id":1
  },
  {
    "id":3
  }
]
```
<-- RESPONSE
```js
{
  "responseCode":1,
  "products":[
    {
      "id":1,
      "name":"zapatillas",
      "price":2900,
      "stock":8,
      "gender":1
    },
    {
      "id":2,
      "name":"bufanda",
      "price":1200,
      "stock":4,
      "gender":1
    }
  ]
}
```


### 2P Ejercicio 4 (JAVA): 

**product/brand/{id}**

* PUT - Edición

Crear un Web service de tipo PUT en la ruta product/brand/{id} para editar todos los productos de una determidada marca. Con control de nulos (editar únicamente los parámetros pasados).

--> REQUEST 
```js
{
  "name":"camisa",
  "gender":1,
  "stock":33
}
```
<-- RESPONSE
```js
{
  "responseCode":1
}
```


## ANEXO BBDD

Entramos en consola SQL de la BBDD creada
```sh
psql clothes_db
```

Ahora copiar y pegar el código DB.sql modificado. El original sin modificar es el siguiente:

```sql

DROP TABLE IF EXISTS products CASCADE;
CREATE TABLE products (
"id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
"name" character varying(100),
"price" integer,
"stock" integer,
"gender" integer
);

REVOKE ALL ON SCHEMA public FROM PUBLIC;
GRANT ALL ON SCHEMA public TO clothes_user;

REVOKE ALL ON products FROM public;
GRANT ALL ON products TO clothes_user;

INSERT INTO products (name, price, stock, gender) VALUES ('pantalones', 2000, 6, 1);
INSERT INTO products (name, price, stock, gender) VALUES ('camiseta', 2200, 4, 1);
INSERT INTO products (name, price, stock, gender) VALUES ('chaqueta', 1000, 1, 1);
INSERT INTO products (name, price, stock, gender) VALUES ('camisa', 3300, 7, 1);
INSERT INTO products (name, price, stock, gender) VALUES ('calcetines', 500, 0, 1);
INSERT INTO products (name, price, stock, gender) VALUES ('blusa', 1800, 1, 2);
INSERT INTO products (name, price, stock, gender) VALUES ('vestido', 4500, 4, 2);
INSERT INTO products (name, price, stock, gender) VALUES ('falda', 3000, 2, 2);
INSERT INTO products (name, price, stock, gender) VALUES ('medias', 1000, 0, 2);
INSERT INTO products (name, price, stock, gender) VALUES ('zapatos de tacón', 3400, 3, 2);
```

## EXCEPCIONES

En todos los web services, en caso de excepción se debe devolver un objeto Response con responseCode = 0.


<br />
<div align="center">
  <h1 align="center">¡Mucho ánimo!</h3>
</div>




